<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>結果分析</title>
  <style>
    body {
      background-color: #efdaa7;
      margin: 0;
      padding: 0;
      position: relative;
      font-family: Arial, sans-serif;
    }
    .container {
      display: flex;
      align-items: center;
      flex-direction: column;
      padding: 20px;
    }
    .image-container {
      margin-bottom: 20px;
      text-align: center;
    }
    .image-container svg {
      max-width: 100%;
      height: 400px;
      border-radius: 10px;
      background-color: #f9f9f9;
    }
    .result-container {
      margin-top: 20px;
      font-size: 18px;
    }
    .quiz-options button {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #ADD8E6;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    .quiz-options button:hover {
      background-color: #e5a3ad;
    }
    .start-button {
      margin-top: 30px;
      padding: 15px 30px;
      background-color: #a5a58d;
      border: none;
      color: white;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="image-container">
    <svg width="400" height="400" viewBox="-250 -250 500 500">
      <!-- 背景线 -->
      <g stroke="#ccc" stroke-width="1">
        <path d="M0,-180 L0,180 M-180,0 L180,0" />
      </g>

      <!-- 多边形 -->
      <g fill="none" stroke="#ccc" stroke-width="1">
        <polygon points="0,-180 180,0 0,180 -180,0" />
        <polygon points="0,-150 150,0 0,150 -150,0" />
        <polygon points="0,-120 120,0 0,120 -120,0" />
        <polygon points="0,-90 90,0 0,90 -90,0" />
        <polygon points="0,-60 60,0 0,60 -60,0" />
        <polygon points="0,-30 30,0 0,30 -30,0" />
      </g>

      <!-- 数据多边形 -->
      <polygon id="dataPolygon" points="0,-180 150,0 0,180 -90,0" fill="rgba(0,0,255,0.2)" stroke="blue" stroke-width="2"/>

      <!-- 标签 -->
      <g font-size="16" text-anchor="middle" fill="#333">
        <text x="0" y="-230">風格</text>
        <text x="230" y="5">顏色</text>
        <text x="0" y="245">季節</text>
        <text x="-230" y="5">場合</text>
      </g>
    </svg>
  </div>

  <!-- 顯示 API 回傳內容的區域 -->
  <div class="result-container">
    <p>風格 數量: <span id="type1">0</span></p>
    <p>顏色 數量: <span id="type2">0</span></p>
    <p>季節 數量: <span id="type3">0</span></p>
    <p>場合 數量: <span id="type4">0</span></p>
  </div>
</div>

<script>
  // 模擬的 user_id，你可以從其他方式獲得
  const userId = 'dennis';

  // 發送 API 請求，獲取資料
  fetch('/api/result', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ user_id: userId })
  })
          .then(response => response.json())
          .then(data => {
            // 將 API 回傳的資料顯示在頁面上
            document.getElementById('type1').textContent = data.type1;
            document.getElementById('type2').textContent = data.type2;
            document.getElementById('type3').textContent = data.type3;
            document.getElementById('type4').textContent = data.type4;

            // 動態更新 SVG 的多邊形根據 type1 - type4 的數據
            const type1Value = -180 + 30 * data.type1; // 根據 type1 計算 y 座標
            const type2Value = 180 - 30 * data.type2; // x 座標根據圖形
            const type3Value = 180 - 30 * data.type3; // y 座標
            const type4Value = -180 + 30 * data.type4; // x 座標

            // 更新多邊形的 points 屬性
            const polygonPoints = `${0},${type1Value} ${type2Value},0 0,${type3Value} ${type4Value},0`;
            document.getElementById('dataPolygon').setAttribute('points', polygonPoints);
          })
          .catch(error => {
            console.error('Error fetching data:', error);
          });
</script>
<button class="start-button" onclick="window.location.href='/category_selection.html'">回首頁</button>
</body>
</html>
